<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>長期インターン</title>
  <link rel="stylesheet" href="./styles.css"/>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- SDK（必要な時だけ設定） -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js" defer></script>
  <script src="https://static.line-scdn.net/liff/edge/versions/2.22.0/sdk.js" defer></script>
</head>
<body>
  <!-- ヘッダー -->
  <header class="site-header">
    <div class="container row between center">
      <div class="logo">長期インターン</div>

      <!-- タブ（2列レイアウト） -->
      <nav class="tabs" id="topTabs">
        <button class="tab active" data-route="jobs">求人を探す</button>
        <button class="tab" data-route="map">地域ナビ</button>
        <button class="tab" data-route="ranking">人気ランキング</button>
        <button class="tab" data-route="articles">記事</button>
        <button class="tab" data-route="education">教育系</button>
        <button class="tab" data-route="account">アカウント</button>
      </nav>

      <div class="row gap-xs">
        <div class="menu-wrap">
          <button class="btn ghost" id="menuBtn" aria-haspopup="true" aria-expanded="false">メニュー ▾</button>
          <div class="menu-panel" id="menuPanel" role="menu" aria-hidden="true">
            <button role="menuitem" data-route="employers">採用担当者様</button>
            <button role="menuitem" data-route="legal">利用規約</button>
            <button role="menuitem" data-route="privacy">プライバシー</button>
            <button role="menuitem" data-route="company">会社情報</button>
            <hr/>
            <button role="menuitem" data-route="admin">管理（承認）</button>
          </div>
        </div>

        <span id="loginState" class="meta">未ログイン</span>
        <button id="btnSignup" class="btn">新規登録</button>
        <button id="btnLogin"  class="btn">ログイン</button>
        <button id="btnLogout" class="btn danger" style="display:none">ログアウト</button>
      </div>
    </div>

    <!-- ヒーロー -->
    <div class="container hero">
      <div class="hero-left">
        <h1>誰もが<span class="brand">最も輝ける場所を</span>見つけよう</h1>
        <p>自分にあった長期インターンがすぐに見つかるプラットフォーム</p>
        <div class="row gap-xs">
          <button class="btn primary" data-route="jobs">求人を探す</button>
          <button class="btn" data-route="ranking">人気ランキング</button>
        </div>
      </div>
      <div class="hero-right"><div class="mock"></div></div>
    </div>
  </header>

  <main class="container">
    <!-- 求人一覧 -->
    <section id="view-jobs" class="panel" style="display:block">
      <h2>求人一覧</h2>

      <!-- 選択肢ベースのフィルタ -->
      <form class="filter-grid" id="jobFilters" onsubmit="return false">
        <input id="q" class="input" placeholder="フリーワード（会社 / タイトル / 説明 / タグ）"/>

        <select id="sort" class="input">
          <option value="new">新着順</option>
          <option value="recommend">おすすめ順</option>
          <option value="wage">時給が高い順</option>
          <option value="days">勤務日数が少ない順</option>
          <option value="intern">インターン生が多い順</option>
          <option value="fav">人気（★/応募/PV）順</option>
        </select>

        <select id="minWage" class="input">
          <option value="0">時給 下限なし</option>
          <option value="1200">1200円〜</option>
          <option value="1500">1500円〜</option>
          <option value="2000">2000円〜</option>
          <option value="2500">2500円〜</option>
        </select>

        <select id="minDays" class="input">
          <option value="2">週2〜</option><option value="3">週3〜</option><option value="4">週4〜</option>
        </select>

        <!-- ★ ここを “指定なし→チェックボックス” ドロップダウンに変更 -->
        <div class="grid-2col">
          <div class="stack">
            <span class="label">職種</span>
            <div id="catDD" class="multi-dd"></div>
          </div>
          <div class="stack">
            <span class="label">働き方・特徴</span>
            <div id="flagDD" class="multi-dd"></div>
          </div>
        </div>

        <div class="grid-2col">
          <label class="row center-left">
            <input type="checkbox" id="f-open" checked>
            <span>募集中のみ</span>
          </label>
          <label class="row center-left">
            <input type="checkbox" id="favOnly">
            <span>★お気に入りのみ</span>
          </label>
        </div>

        <div class="grid-2col">
          <label>インターン生の在籍人数（下限）
            <select id="internMin" class="input">
              <option value="0">指定なし</option>
              <option value="3">3人以上</option>
              <option value="10">10人以上</option>
              <option value="20">20人以上</option>
            </select>
          </label>
          <label>ページサイズ
            <select id="pageSize" class="input"><option>5</option><option selected>10</option><option>15</option><option>20</option></select>
          </label>
        </div>

        <div class="row gap-xs right">
          <button type="button" id="reset" class="btn">条件リセット</button>
        </div>
      </form>

      <div class="row between center" style="margin-top:var(--space)">
        <div class="meta" id="stat">0件</div>
      </div>

      <div id="cards" class="cards"></div>
      <div id="pager" class="pager"></div>
    </section>

    <!-- 地域ナビ -->
    <section id="view-map" class="panel" style="display:none">
      <h2>地域ナビ</h2>
      <p class="meta">都道府県→区市クリックで一覧へ反映</p>
      <div id="mapLinks" class="mapgrid"></div>
    </section>

    <!-- 人気ランキング -->
    <section id="view-ranking" class="panel" style="display:none">
      <h2>人気ランキング TOP20</h2>
      <p class="meta">score = 応募×2 + ★ + PV</p>
      <div id="rankbox" class="list-plain"></div>
    </section>

    <!-- 記事 -->
    <section id="view-articles" class="panel" style="display:none">
      <h2>記事/コンテンツ</h2>
      <div class="filter-grid small">
        <select id="articleCat" class="input"><option value="">すべて</option></select>
        <input id="articleQ" class="input" placeholder="記事を検索"/>
      </div>
      <div id="articleList" class="cards slim"></div>
      <article id="articleDetail" class="panel" style="display:none"></article>
    </section>

    <!-- 教育系 -->
    <section id="view-education" class="panel" style="display:none">
      <h2>教育系アルバイト</h2>
      <div id="eduMount"></div>
    </section>

    <!-- 採用担当者様 -->
    <section id="view-employers" class="panel" style="display:none">
      <h2>採用担当者様</h2>
      <p class="meta">会社情報の登録後、求人の掲載前編集（画像含む）が行えます。</p>

      <form id="employerForm" class="grid-2col">
        <div class="panel soft">
          <label>会社名<input name="company" class="input" required placeholder="株式会社〇〇"/></label>
          <label>担当者名<input name="pic" class="input" required placeholder="山田 太郎"/></label>
          <label>担当者メール<input name="email" type="email" class="input" required placeholder="hr@example.com"/></label>
          <label>電話番号<input name="tel" class="input" placeholder="03-...."/></label>
          <label>所在地（都道府県）
            <select name="pref" class="input">
              <option value="">選択してください</option><option>東京都</option><option>神奈川県</option>
              <option>大阪府</option><option>愛知県</option><option>福岡県</option>
            </select>
          </label>
          <label>企業規模
            <select name="size" class="input">
              <option value="">選択してください</option><option>〜10名</option><option>11〜50名</option>
              <option>51〜200名</option><option>201〜1000名</option><option>1000名以上</option>
            </select>
          </label>
        </div>
        <div class="panel soft">
          <label>業種
            <select name="industry" class="input">
              <option value="">選択してください</option><option>IT・ソフト</option><option>メディア</option>
              <option>コンサル</option><option>メーカー</option><option>金融</option>
              <option>人材/教育</option><option>その他</option>
            </select>
          </label>
          <label>自社サイトURL<input name="url" class="input" placeholder="https://..."/></label>
          <label>請求情報メモ<textarea name="billing" class="input" rows="3" placeholder="請求先名義/住所/支払サイトなど"></textarea></label>
          <label class="row center-left"><input type="checkbox" name="agree" required> <span>規約・プライバシーに同意</span></label>
          <div class="row right"><button type="button" id="saveEmployer" class="btn primary">会社情報を登録</button></div>
          <div class="meta" id="employerNote"></div>
        </div>
      </form>

      <hr class="divider"/>

      <div class="panel">
        <div class="row between center">
          <h3>求人の掲載前編集（ドラフト）</h3>
          <button type="button" id="openNewJob" class="btn">新規求人を作成</button>
        </div>
        <div id="draftList" class="cards"></div>
      </div>
    </section>

    <!-- 管理 -->
    <section id="view-admin" class="panel" style="display:none">
      <h2>管理（承認・公開）</h2>
      <div class="grid-2col">
        <div class="panel soft">
          <h3>応募の承認</h3>
          <div id="adminApps" class="list-plain"></div>
        </div>
        <div class="panel soft">
          <h3>ドラフトの公開</h3>
          <div id="adminDrafts" class="cards slim"></div>
        </div>
      </div>
    </section>

    <!-- 法務/会社情報 -->
    <section id="view-legal" class="panel" style="display:none"><h2>利用規約</h2><div class="legal">…</div></section>
    <section id="view-privacy" class="panel" style="display:none"><h2>プライバシーポリシー</h2><div class="legal">…</div></section>
    <section id="view-company" class="panel" style="display:none"><h2>会社情報</h2><ul class="list"><li>株式会社Brotial（ダミー）</li></ul></section>

    <!-- アカウント -->
    <section id="view-account" class="panel" style="display:none">
      <h2>アカウント</h2>
      <div id="acctBox" class="panel soft"></div>

      <h3>プロフィール（履歴書）</h3>
      <form id="profileForm" class="grid-2col">
        <div class="panel soft">
          <label>名前<input class="input" name="name" placeholder="山田 太郎"/></label>
          <label>大学/学校名>
            <select class="input" name="school">
              <option>東京大学</option><option>京都大学</option><option>早稲田大学</option>
              <option>慶應義塾大学</option><option>一橋大学</option><option>大阪大学</option>
              <option>神戸大学</option><option>その他</option>
            </select>
          </label>
          <label>学年/卒年>
            <select class="input" name="grade">
              <option>B1</option><option>B2</option><option>B3</option><option>B4</option>
              <option>M1</option><option>M2</option><option>D</option><option>既卒</option>
            </select>
          </label>
          <label>専攻<input class="input" name="major" placeholder="情報工学"/></label>
          <label>希望職種<input class="input" name="wishRole" placeholder="エンジニア / マーケ"/></label>
          <label>希望勤務地<input class="input" name="wishArea" placeholder="東京 / 関西 / リモート"/></label>
          <label>希望時給>
            <select class="input" name="wishWage">
              <option>1200円〜</option><option>1500円〜</option><option>2000円〜</option><option>2500円〜</option>
            </select>
          </label>
        </div>
        <div class="panel soft">
          <label>就業可能日数>
            <select class="input" name="days">
              <option>週2〜</option><option>週3〜</option><option>週4〜</option>
            </select>
          </label>
          <label>スキルタグ<input class="input" name="skills" placeholder="Go, React, SQL"/></label>
          <label>SNS / ポートフォリオURL<input class="input" name="links" placeholder="https://..."/></label>
          <label>自己PR<textarea class="input" name="bio" rows="6" placeholder="強み・経験・関心など"></textarea></label>
          <label>顔写真（任意）<input class="input" name="avatar" type="file" accept="image/*"/></label>
          <div class="row center-left gap-xs">
            <img id="avatarPreview" alt="" class="avatar hidden"/>
            <button type="button" id="saveProfile" class="btn primary">保存</button>
          </div>
        </div>
      </form>

      <h3>あなたの活動記録</h3>
      <div id="activityBox" class="panel soft"></div>
      <div class="meta">※ データは自動でスプレッドシートに同期されます。</div>
    </section>
  </main>

  <!-- モーダル/トースト -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-box">
      <div id="modalBody"></div>
      <div class="row right"><button type="button" class="btn" id="modalClose">閉じる</button></div>
    </div>
  </div>
  <div id="toast" class="toast">OK</div>

  <script src="./app.js" defer></script>
</body>
</html>
